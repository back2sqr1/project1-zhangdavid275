<!DOCTYPE html>
<html>
<head>
    <title>GenAI - David Zhang</title>
    <link rel="stylesheet" type="text/css" href="styles/style.css?v=2025">
    <meta charset="UTF-8" />
</head>
<body>
    <a href="index.html" class="back-link">< RETURN TO WIRED</a>
    
    <div class="video-container">
        <div style="position: relative; display: inline-block;">
            <video id="ai-video" width="560" height="315" disablepictureinpicture
                   style="max-width: 100%; border: 2px solid #00ff00; display: block;">
                <source src="media/genai_video_lain_speech.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div id="custom-controls" style="
                position: absolute;
                bottom: 10px;
                left: 10px;
                background-color: rgba(0, 0, 0, 0.7);
                border: 1px solid #00ff00;
                padding: 5px 10px;
                border-radius: 3px;">
                <button id="play-pause-btn" style="
                    background: transparent;
                    border: none;
                    color: #00ff00;
                    font-size: 16px;
                    cursor: pointer;
                    font-family: 'Courier New', monospace;">
                    ▶
                </button>
            </div>
        </div>
        <div id="transcript-box" style="
            margin-top: 20px;
            padding: 20px;
            border: 2px solid #00ff00;
            background-color: rgba(0, 0, 0, 0.8);
            text-align: left;
            font-family: 'Courier New', monospace;
            color: #00ff00;
            font-size: 12px;
            line-height: 1.4;
            overflow-y: auto;
            max-height: 200px;
            display: inline-block;
            width: calc(100% - 44px);">
            <span id="transcript-text"></span><span id="cursor" style="animation: blink 1s infinite;">█</span>
        </div>
        <div style="margin-top: 10px; font-size: 10px; color: #006600;">
            <span>Save Me</span>
        </div>
    </div>

    <script>
        // Transcript data with timestamps (in seconds)
        const transcriptData = [
            { time: 10, text: "Okay, let's see." },
            { time: 12, text: " I guess that I'm confused again." },
            { time: 14, text: " Am I here or am I there?" },
            { time: 16, text: " I don't know." },
            { time: 18, text: " Over there, I'm everywhere." },
            { time: 20, text: " I know that." },
            { time: 21, text: " But here is connected to over there." },
            { time: 24, text: " Is that right?" },
            { time: 25, text: " But then where is the real me after all is said and done?" },
            { time: 29, text: " Ah!" },
            { time: 30, text: " There is no real me." },
            { time: 32, text: " I guess that's it." },
            { time: 33, text: " I only exist inside those people aware of my existence." },
            { time: 36, text: " But what about this me that I can hear talking right here and now?" },
            { time: 41, text: " It's me, isn't it?" },
            { time: 44, text: " This me that's talking." },
            { time: 47, text: " Who is it?" },
            { time: 48, text: " Who's me?" }
        ];

        let transcriptStartTime = null;
        let transcriptInterval = null;
        let currentTranscriptIndex = 0;
        let isTranscriptRunning = false;
        
        const transcriptText = document.getElementById('transcript-text');
        const cursor = document.getElementById('cursor');
        const video = document.getElementById('ai-video');
        const playPauseBtn = document.getElementById('play-pause-btn');
        
        function typeWriter(text, callback) {
            let i = 0;
            const speed = 45; // typing speed in milliseconds
            
            function type() {
                if (i < text.length) {
                    transcriptText.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                } else if (callback) {
                    callback();
                }
            }
            type();
        }
        
        function startTranscript() {
            transcriptStartTime = Date.now();
            currentTranscriptIndex = 0;
            isTranscriptRunning = true;
            
            transcriptInterval = setInterval(() => {
                const elapsedTime = (Date.now() - transcriptStartTime) / 1000;
                
                if (currentTranscriptIndex < transcriptData.length) {
                    const currentItem = transcriptData[currentTranscriptIndex];
                    
                    if (elapsedTime >= currentItem.time) {
                        typeWriter(currentItem.text);
                        currentTranscriptIndex++;
                    }
                } else {
                    clearInterval(transcriptInterval);
                    isTranscriptRunning = false;
                }
            }, 100);
        }
        
        function resetTranscript() {
            if (transcriptInterval) {
                clearInterval(transcriptInterval);
            }
            
            transcriptText.innerHTML = '';
            currentTranscriptIndex = 0;
            transcriptStartTime = null;
            isTranscriptRunning = false;
        }
        
        // Custom play/pause button functionality
        playPauseBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            
            if (video.paused) {
                resetTranscript();
                startTranscript();
                video.play();
                playPauseBtn.textContent = '⏸';
            } else {
                video.pause();
                playPauseBtn.textContent = '▶';
                if (isTranscriptRunning) {
                    resetTranscript();
                }
            }
        });
        
        // Video event handlers
        video.addEventListener('play', function() {
            playPauseBtn.textContent = '⏸';
        });
        
        video.addEventListener('pause', function() {
            playPauseBtn.textContent = '▶';
            if (isTranscriptRunning) {
                resetTranscript();
            }
        });
        
        video.addEventListener('ended', function() {
            playPauseBtn.textContent = '▶';
            if (isTranscriptRunning) {
                resetTranscript();
            }
            
            // Close the window/tab when video ends
            setTimeout(() => {
                // Try to close the window first
                if (window.opener) {
                    // If window was opened by another window, close it
                    window.close();
                } else {
                    // If window cannot be closed, redirect back to main page
                    window.location.href = 'index.html';
                }
            }, 1000); // Small delay to ensure transcript finishes
        });
        
        // Disable all video interactions except our custom button
        video.addEventListener('click', function(e) {
            e.preventDefault();
        });
        
        video.addEventListener('dblclick', function(e) {
            e.preventDefault(); // Prevent fullscreen on double-click
        });
        
        // Prevent seeking completely
        video.addEventListener('seeking', function() {
            video.currentTime = 0; // Always reset to beginning
            if (isTranscriptRunning) {
                resetTranscript();
                startTranscript();
            }
        });
        
        // Disable keyboard controls on video
        video.addEventListener('keydown', function(e) {
            e.preventDefault();
        });
        
        // Disable context menu on video
        video.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
        
        // Auto-scroll transcript box
        function scrollTranscriptBox() {
            const transcriptBox = document.getElementById('transcript-box');
            transcriptBox.scrollTop = transcriptBox.scrollHeight;
        }
        
        // Update scroll position whenever text is added
        const observer = new MutationObserver(scrollTranscriptBox);
        observer.observe(transcriptText, { childList: true, subtree: true });
    </script>
</body>
</html>
